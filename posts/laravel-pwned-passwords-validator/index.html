<!DOCTYPE html>
<html class="light" lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  <meta name="description"
        content="a bit about pwned passwords So, a while ago the pwned passwords database was made available to the public. It was a great idea, a collection of all the discrete passwords that had been included in all the data breaches from &#39;;&amp;ndash;have i been pwned? . Annoyingly to check this database with version 1 of the api you could only specify a username to see if that was included in a breach."
  />
  <meta name="keywords"
        content="software developer, coder, learning to code, laravel, haveibeenpwned, security, password security"
  />

  <link rel="canonical" href="/posts/laravel-pwned-passwords-validator/" />

  <title>laravel pwned passwords validator | üë®‚Äçüíª Adventures of a code ninja</title>

  <link rel="stylesheet" media="all" href="/all.css"/>
  <link rel="stylesheet" media="screen" href="/screen.css"/>
  <link rel="stylesheet" media="screen" href="/app.css"/>
</head>
<body><header>
  <nav>
    <a href="/">
      
        üë®‚Äçüíª adventures of a code ninja
      
    </a>
    <ul>
      
        <li>
          <a href="/posts">
            blog
          </a>
        </li>
      
    </ul>
    <div id="theme-toggle"></div>
  </nav>
</header>
<main>
  <h1>laravel pwned passwords validator</h1>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#a-bit-about-pwned-passwords">a bit about pwned passwords</a></li>
    <li><a href="#why-a-laravel-package">why a laravel package?</a></li>
    <li><a href="#why-should-i-send-passwords-to-some-random-api">why should I send passwords to some random api?</a></li>
    <li><a href="#including-in-your-project">including in your project</a></li>
    <li><a href="#thanks">thanks</a></li>
  </ul>
</nav>
  <br><br>
  <h2 id="a-bit-about-pwned-passwords">a bit about pwned passwords</h2>
<p>So, a while ago the pwned passwords database was made available to the public.
It was a great idea, a collection of all the discrete passwords that had been
included in all the data breaches from <a href="https://haveibeenpwned.com/" target="_blank" rel="noreferrer noopener">';&ndash;have i been pwned?</a>
.
Annoyingly to check this database with version 1 of the api you could only
specify a username to see if that was included in a breach.</p>
<p>With the release of the pwned passwords list, we can now check individual
passwords to see if they were included in a breach. So why not check this list
when registering new users and maintain the integrity of your user accounts.
This idea isn&rsquo;t new, and I heard it on Risky Business <a href="https://risky.biz/RB488/" target="_blank" rel="noreferrer noopener">E488</a>
.</p>
<h2 id="why-a-laravel-package">why a laravel package?</h2>
<p>I thought hells yeah, great idea, but where is the easiest place I can make this
module work with the most impact for my own projects? <a href="https://laravel.com/" target="_blank" rel="noreferrer noopener">Laravel</a>
.</p>
<p>Almost every large scale project I have worked on, has been written using the
laravel framework. So why not just add a validator to this great framework to
allow developers to quickly drop in a check against this database.</p>
<h2 id="why-should-i-send-passwords-to-some-random-api">why should I send passwords to some random api?</h2>
<p>Don&rsquo;t worry, this package won&rsquo;t do anything as stupid as this. First it will
make a SHA1 hash of the password, then send the first 5 characters to the api.
The response from the API will contain a full list of hashes that match the
prefix we sent. If the rest of the hash exists in the list, then the validation
fails, and the error is returned to the validator instance.</p>
<h2 id="including-in-your-project">including in your project</h2>
<p>Using this validator is really easy, check out the <a href="https://github.com/acodeninja/laravel-pwned-passwords-validator" target="_blank" rel="noreferrer noopener">Github Repo</a>

or just use composer to install it</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ composer require acodeninja/laravel-pwned-passwords-validator
</code></pre></div><p>Then use it either in your request classes</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**  
</span><span style="color:#e6db74"> * Get the validation rules that apply to the request.  
</span><span style="color:#e6db74"> *  
</span><span style="color:#e6db74"> * @return array 
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">rules</span>()
{
    <span style="color:#66d9ef">return</span> [
        <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required|email|unique:users,email&#39;</span>, 
        <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required|pwned_password_strict&#39;</span>,
    ];
}
</code></pre></div><p>Or your controllers (if you swing that way)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$validator <span style="color:#f92672">=</span> <span style="color:#a6e22e">Validator</span><span style="color:#f92672">::</span><span style="color:#a6e22e">make</span>($request<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">all</span>(), [
    <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required|email|unique:users,email&#39;</span>, 
    <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required|pwned_password_strict&#39;</span>,
])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>();
</code></pre></div><h2 id="thanks">thanks</h2>
<p>Thanks go out to <a href="https://twitter.com/riskybusiness" target="_blank" rel="noreferrer noopener">Patrick Gray</a>
 for a great
podcast that I&rsquo;ve followed for years, and to <a href="https://twitter.com/troyhunt" target="_blank" rel="noreferrer noopener">Troy Hunt</a>

for making a great resource that is really simple to leverage and increases the
security of the internet as a whole.</p>


</main><footer>
  <div>&copy; Lawrence Goldstien</div>
  <a href="/privacy">Privacy</a>
  <div>My opinions are my own</div>
</footer>
<div id="tracker"></div>
<script src="/app.js"></script>
</body>
</html>
